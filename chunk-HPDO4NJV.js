import{$ as nt,$a as Me,Aa as H,Ab as Et,Ba as F,Bb as Vt,Ca as B,Cb as Dt,Da as rt,Db as Mt,Eb as Se,Fa as ot,Fb as At,Ia as st,Ib as ie,Ja as at,Jb as wt,Ka as lt,La as Z,M as be,Ma as Q,N as G,Na as ee,O as L,Oa as c,Pa as u,Q as S,Qa as U,Ra as ct,Sa as x,T as C,Ta as $,Ua as dt,Va as De,Wa as g,Xa as V,Y as Qe,Ya as ut,Z as et,Za as ht,_ as tt,_a as ft,a as y,ab as Ae,b as E,bb as we,c as p,da as X,eb as pt,gb as gt,h as ze,ha as Ee,hb as w,ia as I,ib as te,k as Ce,kb as Oe,l as Je,m as Xe,ob as mt,pb as ne,qa as it,r as J,ra as m,ua as Ve,ub as _t,va as v,w as Ze,wb as vt,xb as yt,yb as Ct,za as M,zb as bt}from"./chunk-UDQK4BE2.js";var cn=[[["","main",""]],[["","sidebar",""]]],dn=["[main]","[sidebar]"],re=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=M({type:t,selectors:[["app-product-chat-layout"]],ngContentSelectors:dn,decls:6,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-8","p-5","vh-100"],[1,"col-4","p-3","vh-100"]],template:function(n,i){n&1&&(dt(cn),c(0,"div",0)(1,"div",1)(2,"div",2),De(3),u(),c(4,"div",3),De(5,1),u()()())},encapsulation:2})};var oe=class t{#e=C(_t);chatHistoryDataUrl="assets/data/chatHistory.json";chatHistoryData=I([]);getChatHistory(){return this.#e.get(this.chatHistoryDataUrl).pipe(J(e=>e))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})};var Ot="@firebase/vertexai",xe="1.2.1";var Le="vertexAI",Pt="us-central1",un="https://firebasevertexai.googleapis.com",hn="v1beta",St=xe,fn="gl-js",pn=180*1e3;var Ne=class{constructor(e,n,i,r){var o;this.app=e,this.options=r;let s=i?.getImmediate({optional:!0}),a=n?.getImmediate({optional:!0});this.auth=a||null,this.appCheck=s||null,this.location=((o=this.options)===null||o===void 0?void 0:o.location)||Pt}_delete(){return Promise.resolve()}};var d=class t extends vt{constructor(e,n,i){let r=Le,o="VertexAI",s=`${r}/${e}`,a=`${o}: ${n} (${s})`;super(e,a),this.code=e,this.customErrorData=i,Error.captureStackTrace&&Error.captureStackTrace(this,t),Object.setPrototypeOf(this,t.prototype),this.toString=()=>a}};var Te=class t{constructor(e,n){var i,r,o,s,a,f;if(this.model=t.normalizeModelName(n),!((r=(i=e.app)===null||i===void 0?void 0:i.options)===null||r===void 0)&&r.apiKey)if(!((s=(o=e.app)===null||o===void 0?void 0:o.options)===null||s===void 0)&&s.projectId)if(!((f=(a=e.app)===null||a===void 0?void 0:a.options)===null||f===void 0)&&f.appId){if(this._apiSettings={apiKey:e.app.options.apiKey,project:e.app.options.projectId,appId:e.app.options.appId,automaticDataCollectionEnabled:e.app.automaticDataCollectionEnabled,location:e.location},Dt(e.app)&&e.app.settings.appCheckToken){let h=e.app.settings.appCheckToken;this._apiSettings.getAppCheckToken=()=>Promise.resolve({token:h})}else e.appCheck&&(this._apiSettings.getAppCheckToken=()=>e.appCheck.getToken());e.auth&&(this._apiSettings.getAuthToken=()=>e.auth.getToken())}else throw new d("no-app-id",'The "appId" field is empty in the local Firebase config. Firebase VertexAI requires this field to contain a valid app ID.');else throw new d("no-project-id",'The "projectId" field is empty in the local Firebase config. Firebase VertexAI requires this field to contain a valid project ID.');else throw new d("no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase VertexAI requires this field to contain a valid API key.')}static normalizeModelName(e){let n;return e.includes("/")?e.startsWith("models/")?n=`publishers/google/${e}`:n=e:n=`publishers/google/models/${e}`,n}};var T=new bt("@firebase/vertexai");var ae=function(t){return t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.PREDICT="predict",t}(ae||{}),se=class{constructor(e,n,i,r,o){this.model=e,this.task=n,this.apiSettings=i,this.stream=r,this.requestOptions=o}toString(){var e;let n=hn,r=`${((e=this.requestOptions)===null||e===void 0?void 0:e.baseUrl)||un}/${n}`;return r+=`/projects/${this.apiSettings.project}`,r+=`/locations/${this.apiSettings.location}`,r+=`/${this.model}`,r+=`:${this.task}`,this.stream&&(r+="?alt=sse"),r}get fullModelString(){let e=`projects/${this.apiSettings.project}`;return e+=`/locations/${this.apiSettings.location}`,e+=`/${this.model}`,e}};function gn(){let t=[];return t.push(`${fn}/${St}`),t.push(`fire/${St}`),t.join(" ")}function mn(t){return p(this,null,function*(){let e=new Headers;if(e.append("Content-Type","application/json"),e.append("x-goog-api-client",gn()),e.append("x-goog-api-key",t.apiSettings.apiKey),t.apiSettings.automaticDataCollectionEnabled&&e.append("X-Firebase-Appid",t.apiSettings.appId),t.apiSettings.getAppCheckToken){let n=yield t.apiSettings.getAppCheckToken();n&&(e.append("X-Firebase-AppCheck",n.token),n.error&&T.warn(`Unable to obtain a valid App Check token: ${n.error.message}`))}if(t.apiSettings.getAuthToken){let n=yield t.apiSettings.getAuthToken();n&&e.append("Authorization",`Firebase ${n.accessToken}`)}return e})}function _n(t,e,n,i,r,o){return p(this,null,function*(){let s=new se(t,e,n,i,o);return{url:s.toString(),fetchOptions:{method:"POST",headers:yield mn(s),body:r}}})}function He(t,e,n,i,r,o){return p(this,null,function*(){let s=new se(t,e,n,i,o),a,f;try{let h=yield _n(t,e,n,i,r,o),l=o?.timeout!=null&&o.timeout>=0?o.timeout:pn,_=new AbortController;if(f=setTimeout(()=>_.abort(),l),h.fetchOptions.signal=_.signal,a=yield fetch(h.url,h.fetchOptions),!a.ok){let A="",b;try{let D=yield a.json();A=D.error.message,D.error.details&&(A+=` ${JSON.stringify(D.error.details)}`,b=D.error.details)}catch{}throw a.status===403&&b.some(D=>D.reason==="SERVICE_DISABLED")&&b.some(D=>{var ve,ye;return(ye=(ve=D.links)===null||ve===void 0?void 0:ve[0])===null||ye===void 0?void 0:ye.description.includes("Google developers console API activation")})?new d("api-not-enabled",`The Vertex AI in Firebase SDK requires the Vertex AI in Firebase API ('firebasevertexai.googleapis.com') to be enabled in your Firebase project. Enable this API by visiting the Firebase Console at https://console.firebase.google.com/project/${s.apiSettings.project}/genai/ and clicking "Get started". If you enabled this API recently, wait a few minutes for the action to propagate to our systems and then retry.`,{status:a.status,statusText:a.statusText,errorDetails:b}):new d("fetch-error",`Error fetching from ${s}: [${a.status} ${a.statusText}] ${A}`,{status:a.status,statusText:a.statusText,errorDetails:b})}}catch(h){let l=h;throw h.code!=="fetch-error"&&h.code!=="api-not-enabled"&&h instanceof Error&&(l=new d("error",`Error fetching from ${s.toString()}: ${h.message}`),l.stack=h.stack),l}finally{f&&clearTimeout(f)}return a})}var It=["user","model","function","system"];var Pe=function(t){return t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t}(Pe||{});var P=function(t){return t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object",t}(P||{});function Be(t){return t.candidates&&!t.candidates[0].hasOwnProperty("index")&&(t.candidates[0].index=0),vn(t)}function vn(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&T.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Re(t.candidates[0]))throw new d("response-error",`Response error: ${N(t)}. Response body stored in error.response`,{response:t});return yn(t)}else if(t.promptFeedback)throw new d("response-error",`Text not available. ${N(t)}`,{response:t});return""},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&T.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Re(t.candidates[0]))throw new d("response-error",`Response error: ${N(t)}. Response body stored in error.response`,{response:t});return Cn(t)}else if(t.promptFeedback)throw new d("response-error",`Function call not available. ${N(t)}`,{response:t})},t}function yn(t){var e,n,i,r;let o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(let s of(r=(i=t.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)s.text&&o.push(s.text);return o.length>0?o.join(""):""}function Cn(t){var e,n,i,r;let o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(let s of(r=(i=t.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)s.functionCall&&o.push(s.functionCall);if(o.length>0)return o}var bn=[Pe.RECITATION,Pe.SAFETY];function Re(t){return!!t.finishReason&&bn.includes(t.finishReason)}function N(t){var e,n,i;let r="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)r+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(r+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(r+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((i=t.candidates)===null||i===void 0)&&i[0]){let o=t.candidates[0];Re(o)&&(r+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(r+=`: ${o.finishMessage}`))}return r}var Ft=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function En(t){let e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=Mn(e),[i,r]=n.tee();return{stream:Dn(i),response:Vn(r)}}function Vn(t){return p(this,null,function*(){let e=[],n=t.getReader();for(;;){let{done:i,value:r}=yield n.read();if(i)return Be(An(e));e.push(r)}})}function Dn(t){return Je(this,arguments,function*(){let n=t.getReader();for(;;){let{value:i,done:r}=yield Ce(n.read());if(r)break;let o=Be(i);yield yield Ce(o)}})}function Mn(t){let e=t.getReader();return new ReadableStream({start(i){let r="";return o();function o(){return e.read().then(({value:s,done:a})=>{if(a){if(r.trim()){i.error(new d("parse-failed","Failed to parse stream"));return}i.close();return}r+=s;let f=r.match(Ft),h;for(;f;){try{h=JSON.parse(f[1])}catch{i.error(new d("parse-failed",`Error parsing JSON response: "${f[1]}`));return}i.enqueue(h),r=r.substring(f[0].length),f=r.match(Ft)}return o()})}}})}function An(t){let e=t[t.length-1],n={promptFeedback:e?.promptFeedback};for(let i of t)if(i.candidates)for(let r of i.candidates){let o=r.index||0;if(n.candidates||(n.candidates=[]),n.candidates[o]||(n.candidates[o]={index:r.index}),n.candidates[o].citationMetadata=r.citationMetadata,n.candidates[o].finishReason=r.finishReason,n.candidates[o].finishMessage=r.finishMessage,n.candidates[o].safetyRatings=r.safetyRatings,r.content&&r.content.parts){n.candidates[o].content||(n.candidates[o].content={role:r.content.role||"user",parts:[]});let s={};for(let a of r.content.parts){if(a.text!==void 0){if(a.text==="")continue;s.text=a.text}if(a.functionCall&&(s.functionCall=a.functionCall),Object.keys(s).length===0)throw new d("invalid-content","Part should have at least one property, but there are none. This is likely caused by a malformed response from the backend.");n.candidates[o].content.parts.push(s)}}}return n}function Rt(t,e,n,i){return p(this,null,function*(){let r=yield He(e,ae.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),i);return En(r)})}function kt(t,e,n,i){return p(this,null,function*(){let o=yield(yield He(e,ae.GENERATE_CONTENT,t,!1,JSON.stringify(n),i)).json();return{response:Be(o)}})}function jt(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function ke(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(let n of t)typeof n=="string"?e.push({text:n}):e.push(n);return wn(e)}function wn(t){let e={role:"user",parts:[]},n={role:"function",parts:[]},i=!1,r=!1;for(let o of t)"functionResponse"in o?(n.parts.push(o),r=!0):(e.parts.push(o),i=!0);if(i&&r)throw new d("invalid-content","Within a single message, FunctionResponse cannot be mixed with other type of Part in the request for sending chat message.");if(!i&&!r)throw new d("invalid-content","No Content is provided for sending chat message.");return i?e:n}function Fe(t){let e;return t.contents?e=t:e={contents:[ke(t)]},t.systemInstruction&&(e.systemInstruction=jt(t.systemInstruction)),e}var xt=["text","inlineData","functionCall","functionResponse"],On={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall"],system:["text"]},Nt={user:["model"],function:["model"],model:["user","function"],system:[]};function Sn(t){let e=null;for(let n of t){let{role:i,parts:r}=n;if(!e&&i!=="user")throw new d("invalid-content",`First Content should be with role 'user', got ${i}`);if(!It.includes(i))throw new d("invalid-content",`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(It)}`);if(!Array.isArray(r))throw new d("invalid-content","Content should have 'parts' but property with an array of Parts");if(r.length===0)throw new d("invalid-content","Each Content should have at least one part");let o={text:0,inlineData:0,functionCall:0,functionResponse:0};for(let a of r)for(let f of xt)f in a&&(o[f]+=1);let s=On[i];for(let a of xt)if(!s.includes(a)&&o[a]>0)throw new d("invalid-content",`Content with role '${i}' can't contain '${a}' part`);if(e&&!Nt[i].includes(e.role))throw new d("invalid-content",`Content with role '${i} can't follow '${e.role}'. Valid previous roles: ${JSON.stringify(Nt)}`);e=n}}var Tt="SILENT_ERROR",je=class{constructor(e,n,i,r){this.model=n,this.params=i,this.requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiSettings=e,i?.history&&(Sn(i.history),this._history=i.history)}getHistory(){return p(this,null,function*(){return yield this._sendPromise,this._history})}sendMessage(e){return p(this,null,function*(){var n,i,r,o,s;yield this._sendPromise;let a=ke(e),f={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(s=this.params)===null||s===void 0?void 0:s.systemInstruction,contents:[...this._history,a]},h={};return this._sendPromise=this._sendPromise.then(()=>kt(this._apiSettings,this.model,f,this.requestOptions)).then(l=>{var _,A;if(l.response.candidates&&l.response.candidates.length>0){this._history.push(a);let b={parts:((_=l.response.candidates)===null||_===void 0?void 0:_[0].content.parts)||[],role:((A=l.response.candidates)===null||A===void 0?void 0:A[0].content.role)||"model"};this._history.push(b)}else{let b=N(l.response);b&&T.warn(`sendMessage() was unsuccessful. ${b}. Inspect response object for details.`)}h=l}),yield this._sendPromise,h})}sendMessageStream(e){return p(this,null,function*(){var n,i,r,o,s;yield this._sendPromise;let a=ke(e),f={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(r=this.params)===null||r===void 0?void 0:r.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(s=this.params)===null||s===void 0?void 0:s.systemInstruction,contents:[...this._history,a]},h=Rt(this._apiSettings,this.model,f,this.requestOptions);return this._sendPromise=this._sendPromise.then(()=>h).catch(l=>{throw new Error(Tt)}).then(l=>l.response).then(l=>{if(l.candidates&&l.candidates.length>0){this._history.push(a);let _=Object.assign({},l.candidates[0].content);_.role||(_.role="model"),this._history.push(_)}else{let _=N(l);_&&T.warn(`sendMessageStream() was unsuccessful. ${_}. Inspect response object for details.`)}}).catch(l=>{l.message!==Tt&&T.error(l)}),h})}};function In(t,e,n,i){return p(this,null,function*(){return(yield He(e,ae.COUNT_TOKENS,t,!1,JSON.stringify(n),i)).json()})}var Ge=class extends Te{constructor(e,n,i){super(e,n.model),this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=jt(n.systemInstruction),this.requestOptions=i||{}}generateContent(e){return p(this,null,function*(){let n=Fe(e);return kt(this._apiSettings,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},n),this.requestOptions)})}generateContentStream(e){return p(this,null,function*(){let n=Fe(e);return Rt(this._apiSettings,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},n),this.requestOptions)})}startChat(e){return new je(this._apiSettings,this.model,Object.assign({tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction},e),this.requestOptions)}countTokens(e){return p(this,null,function*(){let n=Fe(e);return In(this._apiSettings,this.model,n)})}};function Gt(t=Mt(),e){return t=yt(t),Vt(t,Le).getImmediate({identifier:e?.location||Pt})}function Lt(t,e,n){if(!e.model)throw new d("no-model","Must provide a model name. Example: getGenerativeModel({ model: 'my-model-name' })");return new Ge(t,e,n)}function Fn(){Et(new Ct(Le,(t,{instanceIdentifier:e})=>{let n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Ne(n,i,r,{location:e})},"PUBLIC").setMultipleInstances(!0)),Se(Ot,xe),Se(Ot,xe,"esm2017")}Fn();var le=class t{#e=C(ie);#t=C(At);model;chat;constructor(){let e={functionDeclarations:[{name:"getNumberOfProducts",description:"Get a count of number of products available in the inventory"},{name:"getAllProducts",description:"Get an array of a products with the name and price of the each product"},{name:"getCart",description:"Get an array of a products which is present in cart"},{name:"addToCart",description:"Add product to the cart",parameters:{type:P.OBJECT,properties:{id:{type:P.NUMBER,description:"ID of the product"},name:{type:P.STRING,description:"Name of the product"},price:{type:P.NUMBER,description:"Price of the product"}},required:["id","name","price"]}}]},n=Gt(this.#t),i="Welcom to Fruit Store. you are superstar agent for this ecommerce store. you will assist users by answering question about the inventory and event being able to add items to the cart";this.model=Lt(n,{model:"gemini-2.0-flash",systemInstruction:i,tools:[e]}),this.chat=this.model.startChat()}callFunctions(e){return p(this,null,function*(){let n;for(let i of e){if(i.name==="getNumberOfProducts"){let r=this.#e.getNumberOfProducts();n=yield this.chat.sendMessage([{functionResponse:{name:i.name,response:{numberOfItems:r}}}]);let o=n.response.functionCalls();if(o)return this.callFunctions(o)}if(i.name==="getCart"){let r=this.#e.getCart();n=yield this.chat.sendMessage([{functionResponse:{name:i.name,response:{productsInCart:r}}}]);let o=n.response.functionCalls();if(o)return this.callFunctions(o)}if(i.name==="getAllProducts"){let r=this.#e.getAllProducts();console.log("P LISt =>",r),n=yield this.chat.sendMessage([{functionResponse:{name:i.name,response:{products:r}}}]);let o=n.response.functionCalls();if(o)return this.callFunctions(o)}if(i.name==="addToCart"){let r=i.args,o={id:r.id,name:r.name,price:r.price,imageUrl:""},s=this.#e.addToCart(o);n=yield this.chat.sendMessage([{functionResponse:{name:i.name,response:{success:s}}}]);let a=n.response.functionCalls();if(a)return this.callFunctions(a)}}return n})}ask(e){return p(this,null,function*(){let n=yield this.chat.sendMessage(e),i=n.response.functionCalls();return i&&(n=yield this.callFunctions(i)),console.log("RESPONSE  =>",n),n.response.text()})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"})};var Kt=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,i){this._renderer=n,this._elementRef=i}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(i){return new(i||t)(v(Ve),v(Ee))};static \u0275dir=F({type:t})}return t})(),xn=(()=>{class t extends Kt{static \u0275fac=(()=>{let n;return function(r){return(n||(n=nt(t)))(r||t)}})();static \u0275dir=F({type:t,features:[B]})}return t})(),zt=new S("");var Nn={provide:zt,useExisting:be(()=>fe),multi:!0};function Tn(){let t=Oe()?Oe().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Pn=new S(""),fe=(()=>{class t extends Kt{_compositionMode;_composing=!1;constructor(n,i,r){super(n,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!Tn())}writeValue(n){let i=n??"";this.setProperty("value",i)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(i){return new(i||t)(v(Ve),v(Ee),v(Pn,8))};static \u0275dir=F({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&x("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[Me([Nn]),B]})}return t})();var Rn=new S(""),kn=new S("");function Jt(t){return t!=null}function Xt(t){return ot(t)?Xe(t):t}function Zt(t){let e={};return t.forEach(n=>{e=n!=null?y(y({},e),n):e}),Object.keys(e).length===0?null:e}function Qt(t,e){return e.map(n=>n(t))}function jn(t){return!t.validate}function en(t){return t.map(e=>jn(e)?e:n=>e.validate(n))}function Gn(t){if(!t)return null;let e=t.filter(Jt);return e.length==0?null:function(n){return Zt(Qt(n,e))}}function tn(t){return t!=null?Gn(en(t)):null}function Ln(t){if(!t)return null;let e=t.filter(Jt);return e.length==0?null:function(n){let i=Qt(n,e).map(Xt);return Ze(i).pipe(J(Zt))}}function nn(t){return t!=null?Ln(en(t)):null}function Ht(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Hn(t){return t._rawValidators}function Bn(t){return t._rawAsyncValidators}function Ue(t){return t?Array.isArray(t)?t:[t]:[]}function de(t,e){return Array.isArray(t)?t.includes(e):t===e}function Bt(t,e){let n=Ue(e);return Ue(t).forEach(r=>{de(n,r)||n.push(r)}),n}function Ut(t,e){return Ue(e).filter(n=>!de(t,n))}var ue=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tn(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=nn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},$e=class extends ue{name;get formDirective(){return null}get path(){return null}},z=class extends ue{_parent=null;name=null;valueAccessor=null},We=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Un={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},cr=E(y({},Un),{"[class.ng-submitted]":"isSubmitted"}),rn=(()=>{class t extends We{constructor(n){super(n)}static \u0275fac=function(i){return new(i||t)(v(z,2))};static \u0275dir=F({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&at("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[B]})}return t})();var W="VALID",ce="INVALID",R="PENDING",q="DISABLED",j=class{},he=class extends j{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Y=class extends j{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},K=class extends j{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},k=class extends j{status;source;constructor(e,n){super(),this.status=e,this.source=n}};function $n(t){return(pe(t)?t.validators:t)||null}function Wn(t){return Array.isArray(t)?tn(t):t||null}function qn(t,e){return(pe(e)?e.asyncValidators:t)||null}function Yn(t){return Array.isArray(t)?nn(t):t||null}function pe(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var qe=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return w(this.statusReactive)}set status(e){w(()=>this.statusReactive.set(e))}_status=te(()=>this.statusReactive());statusReactive=I(void 0);get valid(){return this.status===W}get invalid(){return this.status===ce}get pending(){return this.status==R}get disabled(){return this.status===q}get enabled(){return this.status!==q}errors;get pristine(){return w(this.pristineReactive)}set pristine(e){w(()=>this.pristineReactive.set(e))}_pristine=te(()=>this.pristineReactive());pristineReactive=I(!0);get dirty(){return!this.pristine}get touched(){return w(this.touchedReactive)}set touched(e){w(()=>this.touchedReactive.set(e))}_touched=te(()=>this.touchedReactive());touchedReactive=I(!1);get untouched(){return!this.touched}_events=new ze;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Bt(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Bt(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ut(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ut(e,this._rawAsyncValidators))}hasValidator(e){return de(this._rawValidators,e)}hasAsyncValidator(e){return de(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(E(y({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new K(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),n&&e.emitEvent!==!1&&this._events.next(new K(!1,i))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(E(y({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new Y(!1,i))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),n&&e.emitEvent!==!1&&this._events.next(new Y(!0,i))}markAsPending(e={}){this.status=R;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new k(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(E(y({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=q,this.errors=null,this._forEachChild(r=>{r.disable(E(y({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new he(this.value,i)),this._events.next(new k(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(E(y({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=W,this._forEachChild(i=>{i.enable(E(y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(E(y({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===W||this.status===R)&&this._runAsyncValidator(i,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new he(this.value,n)),this._events.next(new k(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(E(y({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?q:W}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=R,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let i=Xt(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new k(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,i)}_initObservables(){this.valueChanges=new X,this.statusChanges=new X}_calculateStatus(){return this._allControlsDisabled()?q:this.errors?ce:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(R)?R:this._anyControlsHaveStatus(ce)?ce:W}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),r&&this._events.next(new Y(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new K(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pe(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Wn(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Yn(this._rawAsyncValidators)}};var on=new S("",{providedIn:"root",factory:()=>Ye}),Ye="always";function Kn(t,e){return[...e.path,t]}function zn(t,e,n=Ye){Xn(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Zn(t,e),ei(t,e),Qn(t,e),Jn(t,e)}function $t(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Jn(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Xn(t,e){let n=Hn(t);e.validator!==null?t.setValidators(Ht(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=Bn(t);e.asyncValidator!==null?t.setAsyncValidators(Ht(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();$t(e._rawValidators,r),$t(e._rawAsyncValidators,r)}function Zn(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&sn(t,e)})}function Qn(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&sn(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function sn(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ei(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function ti(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function ni(t){return Object.getPrototypeOf(t.constructor)===xn}function ii(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(o=>{o.constructor===fe?n=o:ni(o)?i=o:r=o}),r||i||n||null}function Wt(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function qt(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var ri=class extends qe{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,i){super($n(n),qn(i,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pe(n)&&(n.nonNullable||n.initialValueIsDefault)&&(qt(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Wt(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Wt(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){qt(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var oi={provide:z,useExisting:be(()=>Ke)},Yt=Promise.resolve(),Ke=(()=>{class t extends z{_changeDetectorRef;callSetDisabledState;control=new ri;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new X;constructor(n,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=ii(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let i=n.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),ti(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){zn(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){Yt.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let i=n.isDisabled.currentValue,r=i!==0&&gt(i);Yt.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?Kn(n,this._parent):[n]}static \u0275fac=function(i){return new(i||t)(v($e,9),v(Rn,10),v(kn,10),v(zt,10),v(pt,8),v(on,8))};static \u0275dir=F({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Me([oi]),B,Qe]})}return t})();var si=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=H({type:t});static \u0275inj=L({})}return t})();var an=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:on,useValue:n.callSetDisabledState??Ye}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=H({type:t});static \u0275inj=L({imports:[si]})}return t})();function li(t,e){if(t&1&&(c(0,"div",7)(1,"div",9)(2,"strong"),g(3),u(),c(4,"span"),g(5),Ae(6,"date"),u()(),c(7,"p",10),g(8),u()()),t&2){let n=$().$implicit;m(3),V(n.senderName),m(2),V(we(6,3,n.dateTime,"short")),m(3),V(n.message)}}function ci(t,e){if(t&1&&(c(0,"div",8)(1,"div",11)(2,"strong",12),g(3),u(),c(4,"span"),g(5),Ae(6,"date"),u()(),c(7,"p",10),g(8),u()()),t&2){let n=$().$implicit;m(3),V(n.senderName),m(2),V(we(6,3,n.dateTime,"short")),m(3),V(n.message)}}function di(t,e){if(t&1&&rt(0,li,9,6,"div",7)(1,ci,9,6,"div",8),t&2){let n=e.$implicit;lt(n.isSender?1:0)}}var ge=class t{#e=C(oe);#t=C(le);chatHistory=this.#e.chatHistoryData;promptMsg="";ngOnInit(){this.getAllChatHistory()}getAllChatHistory(){this.#e.getChatHistory().subscribe(e=>{this.#e.chatHistoryData.set(e)})}sendPrompt(){return p(this,null,function*(){let e=this.promptMsg;if(!e)return;this.#e.chatHistoryData.update(i=>[...i,{id:0,dateTime:new Date().toISOString(),senderName:"Customer",message:e,isSender:!0}]);let n=yield this.#t.ask(this.promptMsg);console.log("RS=>",n),this.promptMsg="",this.#e.chatHistoryData.update(i=>[...i,{id:0,dateTime:new Date().toISOString(),senderName:"Fruity AI Agent",message:n,isSender:!1}])})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=M({type:t,selectors:[["app-chat-history"]],decls:14,vars:1,consts:[[1,"chatbox","card","shadow-lg","position-relative","overflow-hidden"],[1,"chat-header","text-white","p-3","text-center"],[1,"m-0"],[1,"chat-messages","p-3","overflow-auto",2,"height","400px"],[1,"chat-input","d-flex","align-items-center","p-2","bg-dark","text-white","position-absolute","bottom-0","w-100"],["type","text","placeholder","Type your message...",1,"form-control","me-2",3,"ngModelChange","ngModel"],[1,"btn","btn-purple",3,"click"],[1,"message","p-2","mb-2","rounded-3","bg-light"],[1,"message","p-2","mb-2","rounded-3","bg-primary","text-white","text-end","ms-auto"],[1,"d-flex","justify-content-between","small","text-muted","mb-1"],[1,"mb-0"],[1,"d-flex","justify-content-between","small","text-white-50","mb-1"],[1,"text-white"]],template:function(n,i){n&1&&(c(0,"div",0)(1,"div",1)(2,"h5",2),g(3," Hi, I'm "),c(4,"strong"),g(5,"Fruity \u{1F347}"),u(),g(6," \u2014 Your AI Agent!"),u()(),c(7,"div",3),Q(8,di,2,1,null,null,Z),u(),c(10,"div",4)(11,"input",5),ft("ngModelChange",function(o){return ht(i.promptMsg,o)||(i.promptMsg=o),o}),u(),c(12,"button",6),x("click",function(){return i.sendPrompt()}),g(13,"Send"),u()()()),n&2&&(m(8),ee(i.chatHistory()),m(3),ut("ngModel",i.promptMsg))},dependencies:[ne,mt,an,fe,rn,Ke],styles:[".chatbox[_ngcontent-%COMP%]{position:relative;width:100%;height:85vh;background:linear-gradient(135deg,#6a1b9a,#8e24aa);border-radius:10px;box-shadow:0 4px 10px #0003;overflow:hidden}.chatbox[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7b2ff7,#f107a3);border-top-left-radius:.5rem;border-top-right-radius:.5rem}.chatbox[_ngcontent-%COMP%]   .chat-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:600;letter-spacing:.5px}.chatbox[_ngcontent-%COMP%]   .chat-messages[_ngcontent-%COMP%]{height:calc(100% - 60px);overflow-y:auto}.chatbox[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{word-wrap:break-word}.chatbox[_ngcontent-%COMP%]   .bg-primary[_ngcontent-%COMP%]{background-color:#d433ff!important}.chatbox[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]{background:#ffffff1a;border-top:2px solid rgba(255,255,255,.2)}.chatbox[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{font-size:16px;color:#333}.chatbox[_ngcontent-%COMP%]   .btn-purple[_ngcontent-%COMP%]{background-color:#8e24aa;color:#fff;padding:10px 20px;font-size:18px;transition:background-color .3s ease}.chatbox[_ngcontent-%COMP%]   .btn-purple[_ngcontent-%COMP%]:hover{background-color:#6a1b9a}.chatbox[_ngcontent-%COMP%]   .btn-purple[_ngcontent-%COMP%]:focus{outline:none}"]})};function ui(t,e){if(t&1){let n=ct();c(0,"div",1)(1,"div",2),U(2,"img",3),c(3,"div",4)(4,"h5",5),g(5),u(),c(6,"p",6),g(7),u(),c(8,"button",7),x("click",function(){let r=et(n).$implicit,o=$();return tt(o.addItemToCart(r))}),g(9,"Add to Cart"),u()()()()}if(t&2){let n=e.$implicit;m(2),st("src",n.imageUrl,it),m(3),V(n.name),m(2),V(n.price)}}var me=class t{#e=C(ie);products=this.#e.productList;ngOnInit(){this.getAllProducts()}getAllProducts(){this.#e.getProducts().subscribe(e=>{this.#e.productList.set(e)})}addItemToCart(e){this.#e.addToCart(e)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=M({type:t,selectors:[["app-product-list"]],decls:3,vars:0,consts:[[1,"d-flex","gap-4","flex-wrap"],[1,"product-card","col-md-4","col-sm-6"],[1,"card","w-100"],["alt","Product Image",1,"card-img-top","product-image",3,"src"],[1,"card-body","text-center"],[1,"card-title","product-name"],[1,"product-price"],[1,"btn","add-to-cart",3,"click"]],template:function(n,i){n&1&&(c(0,"div",0),Q(1,ui,10,3,"div",1,Z),u()),n&2&&(m(),ee(i.products()))},styles:[".product-list-container[_ngcontent-%COMP%]{margin:0 auto;display:flex;flex-wrap:wrap}.product-card[_ngcontent-%COMP%]{flex:1 1 30%;display:flex;justify-content:center}.product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 4px 10px #0000001a;transition:transform .3s ease}.product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-img-top[_ngcontent-%COMP%]{max-height:200px;object-fit:cover;border-radius:10px}.product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{text-align:center}.product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:8px}.product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#333}.product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%]{font-size:16px;color:#8e24aa;margin-top:10px}.product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]{background-color:#8e24aa;color:#fff;border-radius:20px;padding:10px 20px;font-size:16px;transition:background-color .3s ease;margin-top:10px}.product-card[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .add-to-cart[_ngcontent-%COMP%]:hover{background-color:#6a1b9a}@media (max-width: 768px){.product-name[_ngcontent-%COMP%]{font-size:16px}.product-price[_ngcontent-%COMP%]{font-size:14px}}"]})};var _e=class t{static \u0275fac=function(n){return new(n||t)};static \u0275mod=H({type:t});static \u0275inj=L({imports:[ne,wt]})};var ln=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=M({type:t,selectors:[["app-home"]],decls:5,vars:0,consts:[["main",""],["sidebar",""]],template:function(n,i){n&1&&(c(0,"app-product-chat-layout")(1,"div",0),U(2,"app-product-list"),u(),c(3,"div",1),U(4,"app-chat-history"),u()())},dependencies:[re,me,ge,_e],encapsulation:2})};export{ln as HomeComponent};
